# 函数性质与图像计算器

本项目基于 **Flask** + **Sympy** + **Matplotlib** 实现了一个简易的网页应用，用户可以在前端输入函数表达式，后端将自动计算该函数的定义域、零点、导函数、局部极值、单调性等性质，并绘制函数图像在网页上显示。

---

## 目录结构

```
math_function/
├── app.py
└── templates/
    └── index.html
```

- **app.py**：Flask 后端服务的核心文件，包含对函数的符号分析与绘图逻辑。  
- **templates/index.html**：前端页面的 HTML 模板，用户输入函数表达式并查看结果。

---

## 功能特性

1. **函数解析**  
   - 使用 `sympy.sympify` 将用户输入的字符串解析为 Sympy 表达式。
   - 支持多种数学函数（如 `sin(x)`, `cos(x)`, `tan(x)`, `log(x)`, `exp(x)`, `sqrt(x)` 等），以及常见运算符（`+`, `-`, `*`, `/`, `**`）。
   
2. **定义域计算**  
   - 借助 `sympy.calculus.util.continuous_domain` 自动计算函数在实数范围内的定义域，考虑分母、对数、根号等可能导致函数不定义的点。
   - 将结果以易读的数学形式输出（如 `(-∞, 0) ∪ (0, ∞)` 等）。

3. **零点求解**  
   - 使用 `sympy.solve` 尝试求解函数在实数范围内的零点，并在网页上输出。如果无法解析求解，则显示“无”或“无法求零点”等提示。

4. **导函数与极值**  
   - 通过 `sympy.diff` 求导数，并用一阶导数的零点作为驻点；  
   - 进一步计算二阶导数以区分局部最大值、最小值或拐点。

5. **单调性分析**  
   - 在区间 `[-10,10]` 通过数值采样判断导函数的正负，从而给出是否整体单调递增、递减或存在变化。

6. **函数图像**  
   - 利用 `matplotlib` 在 `[-10,10]` 区间内绘制函数图像，并在前端以 PNG 图片形式展示。

---

## 安装与使用

### 1. 克隆或下载项目

```bash
git clone https://github.com/cg8-5712/math_function.git
cd math_function
```

### 2. 安装依赖

建议使用 Python 3.7+ 及虚拟环境。  
在项目根目录下执行：

```bash
pip install flask sympy matplotlib numpy
```

> 如果有 `requirements.txt`，也可执行 `pip install -r requirements.txt`。

### 3. 运行服务

```bash
python app.py
```

启动后，默认会在本地的 `127.0.0.1:5000` 端口监听。

### 4. 访问网页

在浏览器中打开 [http://127.0.0.1:5000](http://127.0.0.1:5000)，即可看到输入表单界面：

1. 在输入框中键入函数表达式，例如 `x**3 - 3*x + 1`、`log(x)`、`1/x`、`sin(x) + x` 等。
2. 点击 **提交**，稍等片刻后会看到：
   - 函数的 **定义域**、**零点**、**导函数**、**局部极值**、**单调性** 信息；
   - 函数在 `[-10,10]` 区间的 **图像**。

---

## 输入示例

- `x**2 - 4`
- `sin(x) + cos(x)`
- `1/x`
- `log(x, 2) + sqrt(x) - 3`
- `exp(x) - x`
- `x**3 - 3*x + 1`

注意：
- 变量名请使用 `x`，否则需要在代码中调整符号定义。
- `log(x)` 默认表示自然对数 `ln(x)`；若需指定其他底数，可写 `log(x, 10)`、`log(x, 2)` 等。

---

## 结果展示

以下为一个示例输入 `1/x` 时的输出大致格式：

- **函数**：`1/x`
- **定义域**：`(-∞, 0) ∪ (0, ∞)`
- **零点**：无
- **导函数**：`-1/x^2`
- **局部极值**：无明显局部极值
- **单调性分析**：在区间 `[-10,10]` 内存在单调性变化
- **图像**：在下方显示一张函数图，包含在 x ∈ `[-10,10]` 区间内的曲线。

---

## 可能的扩展与优化

- **更精细的单调区间划分**：目前仅在 `[-10,10]` 区间内采样判断。可使用 Sympy 的符号分析来精确求出单调区间。
- **更通用的定义域检测**：当前基于 `continuous_domain`，对于极少数复杂表达式可能仍需手动校正。
- **多变量函数**：如果要支持多变量函数，可改造 `sympy.Symbol('x')` 为多符号，并在前端选择变量绘制相应的 2D/3D 图像。
- **公式渲染**：可使用 MathJax 或 KaTeX 等在前端对输出的 Sympy LaTeX 表达式进行渲染，使页面更美观。

---

## 许可证

本项目仅用于学习与示例，请遵守 [GNU General Public License 3](https://opensource.org/license/gpl-3-0) 协议。

---

## 联系方式

如有问题或建议，欢迎在仓库 [Issues](https://github.com/cg8-5712/math_function/issues) 中提出，或联系作者：`your_email@example.com`。

